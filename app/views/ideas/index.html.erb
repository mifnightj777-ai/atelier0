<div class="max-w-6xl mx-auto py-12 px-6">
  
  <div class="flex items-end justify-between mb-12 border-b-2 border-slate-900 pb-6">
    <div>
      <h1 class="font-['Poppins'] text-4xl md:text-5xl font-bold text-slate-900 tracking-tight">
        Idea Vault.
      </h1>
      <div class="flex items-center gap-4 mt-3">
        <span class="px-2 py-0.5 bg-slate-100 text-slate-500 text-[10px] font-['Poppins'] font-bold uppercase tracking-widest border border-slate-200">
          Archive
        </span>
        <span class="text-slate-400 text-xs font-['Inter'] font-medium tracking-wide">
          Total: <%= @ideas.count.to_s.rjust(3, '0') %> Files
        </span>
      </div>
    </div>
    
    <%= link_to focus_studio_path, class: "group flex items-center gap-3 text-slate-900 hover:text-indigo-600 transition-colors" do %>
      <span class="text-xs font-['Poppins'] font-bold uppercase tracking-widest group-hover:underline decoration-2 underline-offset-4">Create New File</span>
      <div class="w-10 h-10 border border-slate-900 group-hover:border-indigo-600 flex items-center justify-center transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
      </div>
    <% end %>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <% @ideas.each_with_index do |idea, index| %>
      
      <% seq_num = @ideas.count - index %>
      
      <div class="block group relative bg-white h-64 flex flex-col justify-between p-6 border border-slate-200 hover:border-indigo-600 hover:shadow-xl transition-all duration-300 overflow-hidden rounded-md">
        
        <%= link_to "", edit_idea_path(idea), class: "absolute inset-0 z-10" %>

        <div class="absolute top-0 right-0 w-16 h-16 bg-slate-50 group-hover:bg-indigo-50 transition-colors -z-10 rounded-bl-3xl"></div>

        <div class="flex justify-between items-start pointer-events-none">
          <span class="font-['Poppins'] font-bold text-xs text-slate-300 group-hover:text-indigo-400 transition-colors">
            #<%= seq_num.to_s.rjust(3, '0') %>
          </span>
          
          <% if idea.private_view? %>
             <div class="flex items-center gap-1 border border-slate-200 px-2 py-0.5 rounded-full">
               <span class="w-1.5 h-1.5 rounded-full bg-slate-400"></span>
               <span class="text-[9px] font-bold font-['Poppins'] text-slate-500 uppercase tracking-wider">Private</span>
             </div>
          <% else %>
             <div class="flex items-center gap-1 border border-amber-200 px-2 py-0.5 rounded-full bg-amber-50">
               <span class="w-1.5 h-1.5 rounded-full bg-amber-500"></span>
               <span class="text-[9px] font-bold font-['Poppins'] text-amber-600 uppercase tracking-wider">Team</span>
             </div>
          <% end %>
        </div>

        <div class="mt-4 pointer-events-none">
          <h2 class="font-['Poppins'] font-bold text-2xl text-slate-900 group-hover:text-indigo-600 transition-colors line-clamp-2 leading-tight">
            <%= idea.title.presence || "UNTITLED FILE" %>
          </h2>
          <div class="w-8 h-1 bg-slate-900 group-hover:bg-indigo-600 mt-4 transition-colors"></div>
        </div>

        <div class="mt-auto pt-4 flex justify-between items-end">
          
          <div class="flex flex-col gap-1 pointer-events-none">
            <span class="text-[10px] text-slate-400 font-['Poppins'] uppercase tracking-widest">
              Last Update
            </span>
            <span class="text-xs font-['Inter'] font-bold text-slate-700">
              <%= idea.updated_at.strftime("%Y.%m.%d") %>
            </span>
          </div>

          <div class="flex items-center gap-3">
             <% if idea.memos.any? %>
              <div class="flex items-center gap-1 text-indigo-500 text-xs font-bold font-['Poppins'] pointer-events-none">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" /></svg>
                <span><%= idea.memos.count %></span>
              </div>
            <% end %>

            <div class="relative z-20 opacity-0 group-hover:opacity-100 transition-opacity translate-y-2 group-hover:translate-y-0 duration-300">
              <%= button_to idea_path(idea), method: :delete, data: { turbo_confirm: "Are you sure you want to discard this file? This action cannot be undone." }, class: "text-slate-300 hover:text-red-500 transition-colors p-2 hover:bg-red-50 rounded-full", title: "Discard File" do %>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0" />
                </svg>
              <% end %>
            </div>
            </div>
        </div>

      </div>
    <% end %>

    <% if @ideas.empty? %>
      <div class="col-span-full py-24 text-center border-2 border-dashed border-slate-200 rounded-2xl flex flex-col items-center justify-center opacity-50">
        <p class="font-['Poppins'] text-slate-400 uppercase tracking-widest text-sm">Vault Empty</p>
      </div>
    <% end %>
  </div>
</div>