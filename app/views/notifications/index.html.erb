<div class="max-w-2xl mx-auto py-10">
  
  <div class="mb-10 text-center">
    <h1 class="font-['Poppins'] text-3xl font-bold text-slate-900">Notifications</h1>
    <p class="text-slate-500 text-sm mt-1">Atelier0„Åã„Çâ„ÅÆ„Ç§„É≥„Éì„ÉÜ„Éº„Ç∑„Éß„É≥</p>
  </div>

  <div class="space-y-4">
    <% @notifications.each do |notification| %>
      
      <div class="bg-white p-5 rounded-2xl border border-slate-100 shadow-sm flex items-start gap-4 transition-all hover:shadow-md">
        
        <div class="shrink-0">
          <% if notification.action == "follow_request" %>
            <div class="w-10 h-10 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M10 8a3 3 0 100-6 3 3 0 000 6zM3.465 14.492a5.002 5.002 0 019.07 0 .75.75 0 11-1.36.76 3.502 3.502 0 00-6.35 0 .75.75 0 01-1.36-.76z" /><path d="M15.75 5.5a.75.75 0 11-1.5 0 .75.75 0 011.5 0zM15 11.25a.75.75 0 100-1.5.75.75 0 000 1.5z" /></svg>
            </div>
          <% elsif notification.action == "request_accepted" %>
             <div class="w-10 h-10 rounded-full bg-green-50 text-green-600 flex items-center justify-center">
               <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd" /></svg>
             </div>
          <% end %>
        </div>

        <div class="flex-1">
          <div class="flex justify-between items-start">
            <p class="text-sm text-slate-800 font-['Inter']">
              <span class="font-bold font-['Poppins']">@<%= notification.sender.username %></span>
              
              <% if notification.action == "follow_request" %>
                wants to connect with you.
              <% elsif notification.action == "request_accepted" %>
                accepted your request. You are now teammates!
              <% end %>
            </p>
            <span class="text-[10px] text-slate-400 font-['Space_Grotesk'] whitespace-nowrap ml-2">
              <%= time_ago_in_words(notification.created_at) %> ago
            </span>
          </div>

          <% if notification.action == "follow_request" %>
            <% relationship = notification.notifiable %>
            
            <% if relationship && relationship.pending? %>
              <div class="mt-3 flex gap-3">
                <%= button_to relationship_path(relationship), method: :patch, params: { status: :accepted }, class: "px-4 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-bold font-['Poppins'] rounded-full transition-colors shadow-sm shadow-indigo-200" do %>
                  Accept
                <% end %>

                <%= button_to relationship_path(relationship), method: :delete, class: "px-4 py-1.5 bg-white border border-slate-200 text-slate-500 hover:text-red-500 hover:border-red-200 text-xs font-bold font-['Poppins'] rounded-full transition-colors" do %>
                  Decline
                <% end %>
              </div>
            <% elsif relationship.nil? %>
               <p class="text-xs text-slate-400 mt-2">Request canceled.</p>
            <% else %>
               <p class="text-xs text-indigo-600 mt-2 font-bold font-['Poppins']">Accepted</p>
            <% end %>
          <% end %>
          
        </div>
      </div>
    <% end %>

    <% if @notifications.empty? %>
      <div class="text-center py-20 opacity-50">
        <div class="text-4xl mb-4">üîî</div>
        <p class="font-['Poppins'] text-slate-400">No new notifications.</p>
      </div>
    <% end %>
  </div>
</div>