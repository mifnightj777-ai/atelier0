<div class="min-h-screen flex flex-col items-center justify-center p-6 md:p-0 relative" data-controller="focus-sound">

  <div class="fixed top-6 flex gap-3 animate-fade-in-down z-40">
    
    <button type="button" 
            data-action="click->focus-sound#toggle" 
            data-focus-sound-target="button" 
            data-sound-url="https://actions.google.com/sounds/v1/weather/rain_heavy_loud.ogg"
            class="group flex items-center justify-center w-10 h-10 rounded-full border border-slate-100 bg-white text-slate-400 hover:scale-110 hover:border-indigo-200 hover:text-indigo-500 transition-all duration-300 shadow-sm" 
            title="Rain Sound">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 004.5 4.5H18a3.75 3.75 0 001.332-7.257 3 3 0 00-3.758-3.848 5.25 5.25 0 00-10.233 2.33A4.502 4.502 0 002.25 15z" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 18.75l-1.5 3m6-3l-1.5 3" />
      </svg>
    </button>

    <button type="button" 
            data-action="click->focus-sound#toggle" 
            data-focus-sound-target="button" 
            data-sound-url="https://actions.google.com/sounds/v1/ambiences/fire.ogg"
            class="group flex items-center justify-center w-10 h-10 rounded-full border border-slate-100 bg-white text-slate-400 hover:scale-110 hover:border-indigo-200 hover:text-indigo-500 transition-all duration-300 shadow-sm" 
            title="Fireplace">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.048 8.287 8.287 0 009 9.6a8.983 8.983 0 013.361-6.867 8.21 8.21 0 003 2.48z" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 18a3.75 3.75 0 00.495-7.467 5.99 5.99 0 00-1.925 3.546 5.974 5.974 0 01-2.133-1.001A3.75 3.75 0 0012 18z" />
      </svg>
    </button>

    <button type="button" 
            data-action="click->focus-sound#toggle" 
            data-focus-sound-target="button" 
            data-sound-url="https://actions.google.com/sounds/v1/ambiences/coffee_shop.ogg"
            class="group flex items-center justify-center w-10 h-10 rounded-full border border-slate-100 bg-white text-slate-400 hover:scale-110 hover:border-indigo-200 hover:text-indigo-500 transition-all duration-300 shadow-sm" 
            title="Cafe Ambience">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M17 8h1a4 4 0 1 1 0 8h-1" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V8z" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 1v3" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M10 1v3" />
        <path stroke-linecap="round" stroke-linejoin="round" d="M14 1v3" />
      </svg>
    </button>
  </div>

  <div class="fixed top-6 flex gap-3 animate-fade-in-down z-40">
    </div>

  <div class="fixed top-6 right-6 z-50 animate-fade-in-down" data-controller="focus-timer">
    <div class="flex items-center gap-2">
      <button data-action="click->focus-timer#reset" class="text-slate-200 hover:text-red-400 transition-colors p-2" title="Reset Timer">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
        </svg>
      </button>

      <button data-action="click->focus-timer#toggle" class="text-3xl font-['Space_Grotesk'] font-bold text-slate-300 hover:text-indigo-400 transition-colors tracking-widest tabular-nums w-32 text-right" title="Start/Pause">
        <span data-focus-timer-target="display">25:00</span>
      </button>
    </div>
  </div>
  
  <%= form_with(model: @fragment, url: fragments_path, data: { turbo: false }, class: "w-full max-w-2xl animate-fade-in-up") do |form| %>
    
    <div class="space-y-8">
      
      <div>
        <%= form.text_field :title, 
            placeholder: "Title...", 
            class: "w-full bg-transparent border-none p-0 text-4xl md:text-5xl font-['Poppins'] font-bold text-slate-800 placeholder-slate-200 focus:ring-0 outline-none text-center md:text-left transition-colors" %>
      </div>

      <div>
        <%= form.text_area :description, 
            rows: 10, 
            placeholder: "Just write. No distractions.", 
            class: "w-full bg-transparent border-none p-0 text-lg md:text-xl font-['Inter'] text-slate-600 placeholder-slate-200 focus:ring-0 outline-none resize-none leading-relaxed text-center md:text-left" %>
      </div>

    </div>

    <div class="fixed bottom-0 left-0 right-0 p-6 md:p-10 flex justify-center items-center z-50">
      <div class="bg-white/90 backdrop-blur-md border border-slate-200 rounded-full px-6 py-3 shadow-2xl flex items-center gap-6 transform transition-all hover:scale-105">
        
        <div class="flex items-center gap-2 border-r border-slate-200 pr-6">
          <label class="cursor-pointer group relative">
            <%= form.radio_button :visibility, :public_view, class: "peer sr-only", checked: true %>
            <span class="text-2xl opacity-30 peer-checked:opacity-100 grayscale peer-checked:grayscale-0 transition-all hover:opacity-70">üåç</span>
            <span class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-800 text-white text-[10px] rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">World</span>
          </label>

          <label class="cursor-pointer group relative">
            <%= form.radio_button :visibility, :teammates_view, class: "peer sr-only" %>
            <span class="text-2xl opacity-30 peer-checked:opacity-100 grayscale peer-checked:grayscale-0 transition-all hover:opacity-70">‚ö°Ô∏è</span>
            <span class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-amber-500 text-white text-[10px] rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Teammates</span>
          </label>

          <label class="cursor-pointer group relative">
            <%= form.radio_button :visibility, :private_view, class: "peer sr-only" %>
            <span class="text-2xl opacity-30 peer-checked:opacity-100 grayscale peer-checked:grayscale-0 transition-all hover:opacity-70">üîí</span>
            <span class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-slate-800 text-white text-[10px] rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none">Private</span>
          </label>
        </div>

        <%= form.button class: "text-indigo-600 font-['Poppins'] font-bold text-sm tracking-widest hover:text-indigo-800 transition-colors uppercase" do %>
          DROP
        <% end %>

      </div>
    </div>

  <% end %>

</div>

<style>
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeInDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
  }
  .animate-fade-in-down {
    animation: fadeInDown 0.8s ease-out forwards;
  }
</style>