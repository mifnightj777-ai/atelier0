<%= form_with(model: fragment, class: "contents") do |form| %>
  <% if fragment.errors.any? %>
    <div class="bg-red-50 text-red-600 p-4 text-sm rounded-xl mb-6">
      <ul class="list-disc pl-5">
        <% fragment.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="p-6 md:p-10 space-y-10">
    
    <div>
      <%= form.label :image, "ARTWORK", class: "block text-[10px] font-['Space_Grotesk'] font-bold text-slate-400 uppercase tracking-widest mb-3" %>
      <div class="relative group">
        <%= form.file_field :image, class: "block w-full text-sm text-slate-500 file:mr-4 file:py-3 file:px-6 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 cursor-pointer border-2 border-dashed border-slate-200 rounded-2xl p-8 text-center hover:border-indigo-300 transition-colors" %>
      </div>
    </div>

    <div class="space-y-6">
      <div>
        <%= form.label :title, "TITLE", class: "block text-[10px] font-['Space_Grotesk'] font-bold text-slate-400 uppercase tracking-widest mb-2" %>
        <%= form.text_field :title, placeholder: "Untitled Fragment", class: "w-full px-0 py-2 bg-transparent border-b-2 border-slate-100 focus:border-indigo-500 outline-none transition-all font-['Poppins'] text-2xl font-bold text-slate-900 placeholder-slate-300" %>
      </div>

      <div>
        <%= form.label :description, "STORY / MEMO", class: "block text-[10px] font-['Space_Grotesk'] font-bold text-slate-400 uppercase tracking-widest mb-2" %>
        <%= form.text_area :description, rows: 4, placeholder: "What's on your mind?", class: "w-full p-4 rounded-xl bg-slate-50 border-none focus:ring-2 focus:ring-indigo-100 outline-none transition-all font-['Inter'] text-slate-700 resize-none leading-relaxed text-sm" %>
      </div>
    </div>

    <%= form.hidden_field :parent_id %>
    
    <div>
      <label class="block text-[10px] font-['Space_Grotesk'] font-bold text-slate-400 uppercase tracking-widest mb-4">VISIBILITY</label>
      <div class="grid grid-cols-3 gap-4">
        
        <label class="cursor-pointer group">
          <%= form.radio_button :visibility, :public_view, class: "peer sr-only", checked: true %>
          <div class="flex flex-col items-center justify-center p-4 rounded-2xl border-2 border-slate-100 bg-white text-slate-400 peer-checked:border-indigo-600 peer-checked:text-indigo-600 peer-checked:bg-indigo-50 transition-all duration-300 hover:border-slate-300 h-24">
            <span class="text-2xl mb-2 grayscale group-hover:grayscale-0 peer-checked:grayscale-0 transition-all">üåç</span>
            <span class="text-[10px] font-bold font-['Poppins'] tracking-widest uppercase">World</span>
          </div>
        </label>

        <label class="cursor-pointer group">
          <%= form.radio_button :visibility, :teammates_view, class: "peer sr-only" %>
          <div class="flex flex-col items-center justify-center p-4 rounded-2xl border-2 border-slate-100 bg-white text-slate-400 peer-checked:border-amber-500 peer-checked:text-amber-500 peer-checked:bg-amber-50 transition-all duration-300 hover:border-slate-300 h-24">
            <span class="text-2xl mb-2 grayscale group-hover:grayscale-0 peer-checked:grayscale-0 transition-all">‚ö°Ô∏è</span>
            <span class="text-[10px] font-bold font-['Poppins'] tracking-widest uppercase">Teammates</span>
          </div>
        </label>

        <label class="cursor-pointer group">
          <%= form.radio_button :visibility, :private_view, class: "peer sr-only" %>
          <div class="flex flex-col items-center justify-center p-4 rounded-2xl border-2 border-slate-100 bg-white text-slate-400 peer-checked:border-slate-800 peer-checked:text-slate-800 peer-checked:bg-slate-100 transition-all duration-300 hover:border-slate-300 h-24">
            <span class="text-2xl mb-2 grayscale group-hover:grayscale-0 peer-checked:grayscale-0 transition-all">üîí</span>
            <span class="text-[10px] font-bold font-['Poppins'] tracking-widest uppercase">Private</span>
          </div>
        </label>

      </div>
    </div>

    <div class="pt-2">
      <%= form.submit "Drop Fragment", class: "w-full bg-slate-900 text-white font-['Poppins'] font-bold py-4 rounded-2xl shadow-xl hover:bg-slate-800 hover:shadow-2xl hover:-translate-y-0.5 transition-all cursor-pointer text-sm tracking-widest uppercase" %>
    </div>

  </div>
<% end %>