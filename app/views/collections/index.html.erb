<div class="max-w-6xl mx-auto py-12 px-6">
  
  <div class="flex items-end justify-between mb-12 border-b border-slate-200 pb-6">
    <div>
      <h1 class="font-['Poppins'] text-4xl font-bold text-slate-900 tracking-tight">Collections.</h1>
      <p class="text-slate-400 text-xs mt-2 font-['Space_Grotesk'] tracking-widest uppercase">
        Curated Galleries / <%= @collections.count %> Sets
      </p>
    </div>
    
    <%= link_to new_collection_path, class: "group flex items-center gap-2 bg-slate-900 text-white px-6 py-3 rounded-full hover:bg-indigo-600 transition-all shadow-lg hover:shadow-indigo-200" do %>
      <span class="text-xs font-['Poppins'] font-bold uppercase tracking-widest">New Collection</span>
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4 group-hover:rotate-90 transition-transform"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
    <% end %>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
    <% @collections.each do |collection| %>
      <%= link_to collection_path(collection), class: "group block relative" do %>
        
        <div class="aspect-[4/3] bg-slate-50 rounded-2xl border border-slate-100 overflow-hidden relative mb-4 transition-all duration-300 group-hover:shadow-[0_20px_40px_rgba(0,0,0,0.08)] group-hover:-translate-y-1">
          <div class="absolute inset-0 flex items-center justify-center">
             <% if collection.fragments.any? && collection.fragments.first.image.attached? %>
               <%= image_tag collection.fragments.first.image, class: "w-full h-full object-cover opacity-90 group-hover:scale-105 transition-transform duration-700" %>
             <% else %>
               <div class="text-slate-300 font-['Poppins'] text-6xl font-bold opacity-20">
                 <%= collection.title.first.upcase %>
               </div>
             <% end %>
          </div>
          
          <div class="absolute top-4 left-4">
            <% if collection.view_private? %>
              <span class="px-3 py-1 bg-slate-900/80 backdrop-blur-md text-white text-[10px] font-bold rounded-full uppercase tracking-widest border border-white/10 flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3"><path fill-rule="evenodd" d="M10 1a4.5 4.5 0 00-4.5 4.5V9H5a2 2 0 00-2 2v6a2 2 0 002 2h10a2 2 0 002-2v-6a2 2 0 00-2-2h-.5V5.5A4.5 4.5 0 0010 1zm3 8V5.5a3 3 0 10-6 0V9h6z" clip-rule="evenodd" /></svg>
                Private
              </span>
            <% else %>
              <span class="px-3 py-1 bg-white/80 backdrop-blur-md text-indigo-600 text-[10px] font-bold rounded-full uppercase tracking-widest border border-white/50 flex items-center gap-1">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3"><path d="M10 9a3 3 0 100-6 3 3 0 000 6zM6 8a2 2 0 11-4 0 2 2 0 014 0zM1.49 15.326a.78.78 0 01-.358-.442 3 3 0 014.308-3.516 6.484 6.484 0 00-1.905 3.959c-.023.222-.014.442.025.654a4.97 4.97 0 01-2.07-.655zM16.44 15.98a4.97 4.97 0 002.07-.654.78.78 0 00.358-.442 3 3 0 00-4.308-3.516 6.484 6.484 0 011.905 3.959c.023.222.014.442-.025.654zM12.809 13.25a7.512 7.512 0 01-5.618 0 2.5 2.5 0 00-2.166.024c-.453.25-.75.727-.75 1.226 0 .58.212 1.125.59 1.55a.75.75 0 00.158.148 10.035 10.035 0 005.026 1.302c1.77 0 3.447-.463 4.922-1.28a.75.75 0 00.169-.15 2.25 2.25 0 00.58-1.568c0-.5-.296-.976-.75-1.226a2.5 2.5 0 00-2.161-.024z" /></svg>
                Teammates
              </span>
            <% end %>
          </div>
        </div>

        <h2 class="font-['Poppins'] font-bold text-xl text-slate-900 group-hover:text-indigo-600 transition-colors">
          <%= collection.title %>
        </h2>
        <p class="text-sm text-slate-400 mt-1 font-['Inter'] line-clamp-1">
          <%= collection.description.presence || "No description" %>
        </p>
        <p class="text-[10px] text-slate-300 font-['Space_Grotesk'] mt-2 tracking-widest uppercase">
          <%= collection.fragments.count %> Items
        </p>

      <% end %>
    <% end %>

    <% if @collections.empty? %>
      <div class="col-span-full py-24 text-center border-2 border-dashed border-slate-100 rounded-3xl">
        <p class="font-['Poppins'] text-slate-400 text-sm font-bold">No collections yet.</p>
        <p class="text-xs text-slate-300 mt-2">Create a collection to curate your favorite fragments.</p>
      </div>
    <% end %>
  </div>
</div>